language: java

# Use container-based infrastructure to allow caching (for ccache).
sudo: false 

git:
  # Travis CI tries to clone submodules for us, but we don't want all
  # the submodules.
  submodules: false

# TODO this build of opensim-core does *not* contain bindings
matrix:
  include:
    - os: osx
      env: DEPLOY=yes
      
before_install:
  - /usr/libexec/java_home -V
  ## Install NetBeans.
  #brew tap caskroom/versions
  #brew cask search java
  #brew cask install java8
  - brew cask install netbeans ant
  
  ## Install opensim-core.
  # The opensim-core travis script uploads the opensim-core binaries to sourceforge.
  - OSIMCOREZIP=opensim-core-latest_${TRAVIS_OS_NAME}_RelWithDebInfo.zip
  - wget https://prdownloads.sourceforge.net/myosin/opensim-core/$OSIMCOREZIP
  # Put opensim-core in ~/opensim-core (-q: quiet).
  - unzip -q $OSIMCOREZIP -d ~
  
install:
  # Only get certain submodules (TODO when opensim-models is public, get that one too).
  - git submodule update --init --recursive -- opensim-visualizer Gui/opensim/threejs
  
  - mkdir ../build && cd ../build
  - cmake ../opensim-gui -DCMAKE_PREFIX_PATH=~/opensim-core
  # - ant build -Dnbplatform.default.netbeans.dest.dir="/Applications/NetBeans/NetBeans 8.2.app/Contents/Resources/NetBeans" -Dnbplatform.default.harness.dir="/Applications/NetBeans/NetBeans 8.2.app/Contents/Resources/NetBeans/harness"
  - make PrepareInstaller
  
script: 
  - echo "No tests."
